# Centralized Last-Mile Delivery Drones (CentralizedLMDD)

This repository contains the implementation and experiments for the **Centralized Last-Mile Delivery Drones** project. The heuristic was build in C++, while the exact model was build in Julia+Gurobi. The experiments compare the performance of an exact MILP-based model with a heuristic model for drone pathfinding and scheduling. The results in our paper **A graph-based airspace control for last-mile delivery drones" are presented in four plots, which are generated using Julia and R scripts provided in this repository.

## Directory Structure

```
.
├── generate_comparison_plots.r        # R script to generate comparison plots between exact and heuristic models
├── heuristic_cpp/                     # C++ source code and compiled binaries for the heuristic model
│   ├── Drone.cpp
│   ├── Drone.h
│   ├── Drone.o
│   ├── drone_simulation               # Compiled executable for the C++ heuristic model
│   ├── inputs/                        # Directory for input files used by the C++ model
│   ├── main.cpp
│   ├── main.o
│   ├── Makefile                       # Makefile for compiling the C++ heuristic model
│   ├── outputs/                       # Directory for output files generated by the C++ model
│   ├── PathFinding.cpp
│   ├── PathFinding.h
│   ├── PathFinding.o
│   ├── Utilities.cpp
│   ├── Utilities.h
│   └── Utilities.o
├── julia/                             # Julia scripts and generated data for the experiments
│   ├── comparison_experiment.jl       # Julia script for running comparison experiments
│   ├── cpp_obj_boxplot_vs_drones.png
│   ├── cpp_obj_data.csv
│   ├── cpp_time_boxplot_vs_drones.png
│   ├── cpp_time_data.csv
│   ├── experiments_heuristic.jl       # Julia script for running heuristic experiments
│   ├── input_drones.txt
│   ├── julia_obj_boxplot_vs_drones.png
│   ├── julia_obj_data.csv
│   ├── julia_time_boxplot_vs_drones.png
│   ├── julia_time_data.csv
│   ├── model.jl                       # Julia module defining the MILP model
│   ├── normalized_distances.csv
│   ├── output_normalized_drones.txt
│   ├── routing_times.csv
│   └── utils.jl
├── plot_norm_dist.r                   # R script to plot normalized distances
├── plot_routing_time.r                # R script to plot routing times
└── README.md                          # This README file
```

## Getting Started

### Prerequisites

1. **Julia**: Install Julia from [https://julialang.org/downloads/](https://julialang.org/downloads/).
2. **R**: Install R from [https://cran.r-project.org/](https://cran.r-project.org/).
3. **Gurobi**: Ensure you have Gurobi installed and the license configured.

### Running the Experiments

1. **Set Up Gurobi License**

   Before running the Julia scripts, ensure that the Gurobi license file path is correctly set in `model.jl`. Update the path to your Gurobi license:

   ```julia
   module DroneModel

   using JuMP, Random, Gurobi

   ENV["GRB_LICENSE_FILE"] = "/path/to/your/gurobi.lic"

   # Function to set up and solve the MILP model
   function solve_model(grid_rows, grid_columns, T, drones)
   ```

2. **Compile the C++ Heuristic Model (Optional)**

   The heuristic model is precompiled. If you need to make modifications, navigate to the `heuristic_cpp/` directory and run `make`:

   ```bash
   cd heuristic_cpp
   make
   ```

   This will generate the `drone_simulation` executable.

3. **Run Julia Experiments**

   There are two main Julia scripts:

   - **Comparison Experiment** (`comparison_experiment.jl`): Runs the experiment comparing the exact MILP model with the heuristic model. This script generates the `.csv` files used by `generate_comparison_plots.r`.

   - **Heuristic Experiment** (`experiments_heuristic.jl`): Runs the heuristic experiment. This script generates the `.csv` files used by `plot_norm_dist.r` and `plot_routing_time.r`.

   Execute these scripts in the following order:

   ```bash
   julia julia/comparison_experiment.jl
   julia julia/experiments_heuristic.jl
   ```

### Generating Plots

After running the experiments, you can generate the plots using the provided R scripts.

1. **Generate Comparison Plots**

   The `generate_comparison_plots.r` script generates the plots comparing the running time and objective function values between the exact and heuristic models:

   ```bash
   Rscript generate_comparison_plots.r
   ```

   This script reads the `.csv` files generated by `comparison_experiment.jl` and produces two plots.

2. **Generate Heuristic Plots**

   The `plot_norm_dist.r` and `plot_routing_time.r` scripts generate plots for the normalized distances and routing times respectively:

   ```bash
   Rscript plot_norm_dist.r
   Rscript plot_routing_time.r
   ```

   These scripts read the `.csv` files generated by `experiments_heuristic.jl` and produce two additional plots.

### Summary of Generated Plots

- **Comparison of Running Time**: `generate_comparison_plots.r`
- **Comparison of Objective Values**: `generate_comparison_plots.r`
- **Normalized Distances**: `plot_norm_dist.r`
- **Routing Times**: `plot_routing_time.r`

These plots are used in the paper to demonstrate the performance and scalability of the exact and heuristic models.

---

Feel free to modify this `README.md` as needed to suit your specific project and workflow.